!function($){var defaultOptions={type:"Airlines",showIcon:!1,showExcluded:!1,scrollable:!0,onSelect:function(){}},methods={init:function(options){console.log(options),options&&"object"==typeof options&&(options=$.extend({},defaultOptions,options)),$(this).length>0&&($(this).autocomplete({source:function(request,response){var matches_ori=$.map(eval("external_file_"+options.type),function(e){if(normalize(e).toUpperCase().indexOf(normalize(request.term).toUpperCase())>-1&&(!(normalize(e).indexOf("|E")>0)||options.showExludedAirlines)){if(e.indexOf("|E")>0&&options.showExcluded)return e.replace("|E","");if(-1==e.indexOf("|E"))return e}}),matches=null,result=null,re=$.ui.autocomplete.escapeRegex(normalize(request.term)),matcher=new RegExp(re,"i");if("Cities"==options.type&&"undefined"!=typeof external_file_cities_duplicate)try{matches=$.merge(matches_ori,eval("external_file_cities_duplicate"))}catch(e){matches=matches_ori}else matches=matches_ori;if("AirportsCities"==options.type){var result=[];3==re.length&&(result=$.grep(matches,function(e){return matcher.test(normalize(e.substring(e.indexOf("(")+1,e.length-1)))}));var resultDesc=$.grep(matches,function(e){if($.inArray(e,result)<0)return matcher.test(normalize(e.substring(0,e.indexOf(",")>=0?e.indexOf(","):e.length)))})}else{var resultDesc=$.grep(matches,function(e){return matcher.test(normalize(e.substring(0,e.indexOf(",")>=0?e.indexOf(","):e.length)))});3==re.length&&(result=$.grep(matches,function(e){return matcher.test(normalize(e.substring(e.indexOf("(")+1,e.length-1)))}))}if(null==result)response(resultDesc);else{var index=resultDesc.indexOf(result.toString());index>-1&&resultDesc.splice(index,1),response(result.concat(resultDesc))}},autoFocus:!0,select:function(e,t){t.item.value=t.item.label},delay:0,minLength:3}).data("ui-autocomplete")._renderItem=function(e,t){if("AirportsCities"==options.type){if(t.value.substring(t.value.indexOf("(")+1,t.value.indexOf(")")+1).indexOf("-")<0){t.description="",t.value.substring(0,t.value.indexOf("|")+1).length>0&&(t.description=t.value.substring(0,t.value.indexOf("|")),t.label=t.label.substring(t.label.indexOf("|")+1,t.label.length));var n="img/marker.png";return $("<li></li>").data("item.autocomplete",t).append("<a><table style='margin-bottom: 0 !important; border-radius: 1px;'><td width='30px' valign='middle' style='padding: 2px 0 2px 0 !important'><img src='"+n+"' style='padding:0px 0px 0 2px;'></td><td valign='' align='left' style='padding: 0 !important'>"+t.label+"<br><span class='nts-text-secondary'>"+t.description+"</span></td></tr></table></a>").appendTo(e)}t.label=t.label.substring(t.label.indexOf("|")+1,t.label.length),t.label=t.label.substring(0,t.label.indexOf("(")+1)+t.label.substring(t.label.indexOf("-")+1,t.label.length);n="img/flights.png";return $("<li></li>").data("item.autocomplete",t).append("<a><table style='margin-bottom: 0 !important; border-radius: 1px;'><td width='30px' valign='middle' style='padding: 2px 0 2px 0 !important'><img src='"+n+"' style='padding:0px 0px 0 2px;'></td><td valign='' align='left' style='padding: 0 !important'>"+t.label+"<br><span class='nts-text-secondary'></span></td></tr></table></a>").appendTo(e)}return $("<li></li>").data("item.autocomplete",t).append("<a>"+t.label+"</a>").appendTo(e)},"function"==typeof options.onSelect&&$(this).bind("autocompleteselect",function(e,t){setTimeout(function(){options.onSelect()},10)}),options.scrollable&&$(this).autocomplete("widget").css({"max-height":"150px","overflow-y":"auto","overflow-x":"hidden"}))},change:function(e){$(this).autocomplete("destroy"),$(window).unbind(".netautocomplete"),e&&"object"==typeof e&&(e=$.extend({},defaultOptions,e)),$(this).netautocomplete(e)}};$.fn.netautocomplete=function(e){return methods[e]?methods[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.tooltip"):methods.init.apply(this,arguments)};var normalize=function(e){for(var t="",n=0;n<e.length;n++)t+=$accentMap[e.charAt(n)]||e.charAt(n);return t}}(jQuery);